<!DOCTYPE html>
<html>

<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript">
    </script>
    <script src="/Pin.js" type="text/javascript"></script>
    <script src="/RRUser.js" type="text/javascript"></script>
    <script type="text/javascript">
        RR = {
            getValidatedSocket: function () {
                var socket = RR.getSocket();
                if (typeof socket === 'undefined') {
                    throw new Error('RR.getValidatedSocket(): no socket defined for RR.');
                }
                return socket;
            },
            sendUsername: function (name) {
                var socket = RR.getValidatedSocket();
                socket.emit('set username', { username: name });
            },
            getSocket: function () {
                return RR.socket;
            },
            setSocket: function (socket) {
                RR.socket = socket;
            },
            getUser: function () {
                return RR.user;
            },
            setUser: function (user) {
                RR.user = user;
            },
            user: new RRUser()
        };
    </script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var socket = io.connect('http://localhost:1337');
            RR.setSocket(socket);
            socket.on('colors with threads', function (data) {
                $('body').append(data);
            });
            socket.on('user update', function (user) {
                RR.setUser(user);
            });
            $('#sendName').on('click', function () {
                RR.sendUsername($('#nameToSend').val());
            });
        });
    </script>
</head>

<body>
    <input id="nameToSend" type="text"></input>
    <button id="sendName">send name</button>
</body>

</html>
