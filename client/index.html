<!DOCTYPE html>
<html>

<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript">
    </script>
    <script src="/PinItUser.js" type="text/javascript"></script>
    <script type="text/javascript">
        PinIt = {
            getValidatedSocket: function () {
                var socket = PinIt.getSocket();
                if (typeof socket === 'undefined') {
                    throw new Error('PinIt.getValidatedSocket(): no socket defined for PinIt.');
                }
                return socket;
            },
            sendUsername: function (name) {
                var socket = PinIt.getValidatedSocket();
                socket.emit('set username', { username: name });
            },
            getSocket: function () {
                return PinIt.socket;
            },
            setSocket: function (socket) {
                PinIt.socket = socket;
            },
            getUser: function () {
                return PinIt.user;
            },
            setUser: function (user) {
                PinIt.user = user;
            },
            user: new PinItUser()
        };
    </script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var socket = io.connect('http://localhost:1337');
            PinIt.setSocket(socket);
            socket.on('colors with threads', function (data) {
                $('body').append(data);
            });
            socket.on('user update', function (pinitUser) {
                PinIt.setUser(pinitUser);
            });
            $('#sendName').on('click', function () {
                PinIt.sendUsername($('#nameToSend').val());
            });
        });
    </script>
</head>

<body>
    <input id="nameToSend" type="text"></input>
    <button id="sendName">send name</button>
</body>

</html>
